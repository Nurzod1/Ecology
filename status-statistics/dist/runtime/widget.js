System.register(["jimu-core"],(function(t,e){var s={};return{setters:[function(t){s.React=t.React,s.jsx=t.jsx}],execute:function(){t((()=>{var t={6174:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});var a=s(8081),r=s.n(a),n=s(3645),o=s.n(n)()(r());o.push([t.id,'.status-statistics-widget{width:100%;height:100%;display:flex;flex-direction:column;padding:20px 18px;border-radius:20px;background:rgba(16,28,50,.3);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.05);box-sizing:border-box;opacity:0;transform:translateY(8px);transition:opacity .3s ease,transform .3s ease;position:relative;z-index:10000}.status-statistics-widget.visible{opacity:1;transform:translateY(0)}.status-statistics-header{display:flex;justify-content:center;margin-bottom:8px}.status-statistics-title{font-family:"Geologica",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;font-weight:400;font-size:16px;line-height:24px;color:#afafb3;text-align:center}.status-statistics-columns{flex:1;display:flex;gap:0;padding-top:8px}.status-statistics-column{flex:1;display:flex;flex-direction:column;align-items:stretch;justify-content:space-between;padding:14px 10px 10px;box-sizing:border-box;position:relative;cursor:pointer;transition:background .2s ease,transform .15s ease,box-shadow .15s ease}.status-statistics-column::before{content:"";position:absolute;top:0;left:0;width:1px;height:100%;background:rgba(255,255,255,.1);opacity:.1}.status-statistics-column:first-child::before{display:none}.status-statistics-column:hover{transform:translateY(-2px)}.status-selected{box-shadow:0 0 0 1px rgba(255,255,255,.2),0 14px 30px rgba(0,0,0,.6);border-radius:14px}.status-checked{background:rgba(0,0,0,0)}.status-approved{background:rgba(0,0,0,0)}.status-rejected{background:rgba(0,0,0,0)}.status-in-progress{background:rgba(0,0,0,0)}.status-statistics-top{display:flex;flex-direction:column;align-items:center;width:100%}.status-statistics-value{font-family:"Geologica",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;font-weight:400;font-size:24px;line-height:28px;color:#fff}.status-statistics-unit{margin-top:2px;font-family:"Geologica",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;font-weight:300;font-size:12px;line-height:14px;color:#fff}.status-statistics-label{margin-top:4px;font-family:"Geologica",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;font-weight:300;font-size:12px;line-height:14px;color:#fff}.status-statistics-bar{width:100%;border-radius:22px 22px 0 0;align-self:flex-end;overflow:hidden;clip-path:polygon(0 0, 100% 12%, 100% 100%, 0 100%)}.status-checked-bar{background:linear-gradient(180deg, #2383f9 0%, #0052cc 100%)}.status-approved-bar{background:repeating-linear-gradient(-60deg, rgba(40, 190, 193, 0.1) 0 8px, transparent 8px 16px),linear-gradient(180deg, #28bec1 0%, #038f92 100%)}.status-rejected-bar{background:repeating-linear-gradient(-60deg, rgba(193, 40, 98, 0.12) 0 8px, transparent 8px 16px),linear-gradient(180deg, #c12862 0%, #8e0b40 100%)}.status-in-progress-bar{background:repeating-linear-gradient(-60deg, rgba(81, 116, 146, 0.14) 0 8px, transparent 8px 16px),linear-gradient(180deg, #517492 0%, #33485b 100%)}',""]);const i=o},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",a=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),a&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),a&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,a,r,n){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(a)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);a&&o[u[0]]||(void 0!==n&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=n),s&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=s):u[2]=s),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),e.push(u))}},e}},8081:t=>{"use strict";t.exports=function(t){return t[1]}},3379:t=>{"use strict";var e=[];function s(t){for(var s=-1,a=0;a<e.length;a++)if(e[a].identifier===t){s=a;break}return s}function a(t,a){for(var n={},o=[],i=0;i<t.length;i++){var c=t[i],l=a.base?c[0]+a.base:c[0],u=n[l]||0,d="".concat(l," ").concat(u);n[l]=u+1;var p=s(d),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(g);else{var m=r(g,a);a.byIndex=i,e.splice(i,0,{identifier:d,updater:m,references:1})}o.push(d)}return o}function r(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,r){var n=a(t=t||[],r=r||{});return function(t){t=t||[];for(var o=0;o<n.length;o++){var i=s(n[o]);e[i].references--}for(var c=a(t,r),l=0;l<n.length;l++){var u=s(n[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}n=c}}},569:t=>{"use strict";var e={};t.exports=function(t,s){var a=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(s)}},9216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,s)=>{"use strict";t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var a="";s.supports&&(a+="@supports (".concat(s.supports,") {")),s.media&&(a+="@media ".concat(s.media," {"));var r=void 0!==s.layer;r&&(a+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),a+=s.css,r&&(a+="}"),s.media&&(a+="}"),s.supports&&(a+="}");var n=s.sourceMap;n&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleTagTransform(a,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},8891:t=>{"use strict";t.exports=s}},e={};function a(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={id:s,exports:{}};return t[s](n,n.exports,a),n.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.p="",a.nc=void 0;var r={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(r),a.d(r,{__set_webpack_public_path__:()=>j,default:()=>y});var t=a(8891);const e={checkedCount:1e3,approvedCount:1e3,rejectedCount:600,inProgressCount:400};var s=a(3379),n=a.n(s),o=a(7795),i=a.n(o),c=a(569),l=a.n(c),u=a(3565),d=a.n(u),p=a(9216),g=a.n(p),m=a(4589),f=a.n(m),v=a(6174),h={};h.styleTagTransform=f(),h.setAttributes=d(),h.insert=l().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=g(),n()(v.Z,h),v.Z&&v.Z.locals&&v.Z.locals;const b={tasdiqlangan:"approved",tasdiqlanmagan:"rejected",tekshirilgan:"checked",jarayonda:"inProgress"},x={approved:"tasdiqlangan",rejected:"tasdiqlanmagan",checked:"tekshirilgan",inProgress:"jarayonda"},y=s=>{var a,r,n,o;const i=Object.assign(Object.assign({},e),s.config||{}),[c,l]=t.React.useState({checkedCount:null!==(a=i.checkedCount)&&void 0!==a?a:2e3,approvedCount:null!==(r=i.approvedCount)&&void 0!==r?r:1e3,rejectedCount:null!==(n=i.rejectedCount)&&void 0!==n?n:600,inProgressCount:null!==(o=i.inProgressCount)&&void 0!==o?o:400}),[u,d]=t.React.useState(!1),[p,g]=t.React.useState(!1),m=t=>t?"uz-Latn"===t?"uz":"uz-Cyrl"===t?"cyr":"uz"===t||"ru"===t||"cyr"===t?t:"ru":"ru",[f,v]=t.React.useState((()=>{try{const t=localStorage.getItem("customLocal");return m(t)}catch(t){return"ru"}})),[h,y]=t.React.useState(null),j={uz:{title:"Statuslar bo‘yicha statistika",checkedLabel:"Tekshirilganlar",approvedLabel:"Tasdiqlangan",rejectedLabel:"Tasdiqlanmagan",inProgressLabel:"Jarayonda",unit:"ta",numberLocale:"uz-UZ"},cyr:{title:"Статуслар бўйича статистика",checkedLabel:"Текширилганлар",approvedLabel:"Тасдиқланган",rejectedLabel:"Тасдиқланмаган",inProgressLabel:"Жараёнда",unit:"та",numberLocale:"uz-Cyrl-UZ"},ru:{title:"Статистика по статусам",checkedLabel:"Проверенные",approvedLabel:"Подтвержденные",rejectedLabel:"Неподтвержденные",inProgressLabel:"В процессе",unit:"шт",numberLocale:"ru-RU"}};t.React.useEffect((()=>{const t=()=>{try{const t=localStorage.getItem("customLocal"),e=m(t);v((t=>e!==t?e:t))}catch(t){}};t();const e=e=>{"customLocal"!==e.key&&null!==e.key||t()};window.addEventListener("storage",e);const s=setInterval(t,500);return()=>{window.removeEventListener("storage",e),clearInterval(s)}}),[]),t.React.useEffect((()=>{try{const t=localStorage.getItem("status");t&&b[t]&&y(b[t])}catch(t){}}),[]),t.React.useEffect((()=>{g(!0)}),[]),t.React.useEffect((()=>{const t=()=>{return t=void 0,e=void 0,a=function*(){var t,e,s,a,r,n,o,c;d(!0);try{const r=localStorage.getItem("selectedYear"),n=localStorage.getItem("selectedSoato"),o=localStorage.getItem("selectedDistrict"),c=new URL("http://10.0.71.2:8000/api/ecology/stats/status");if(r&&c.searchParams.append("year",r),n&&"all"!==n){const t=n.length;o||t>=7?c.searchParams.append("district",n):4===t&&c.searchParams.append("region",n)}const u={"Content-Type":"application/json"},d=localStorage.getItem("authToken")||localStorage.getItem("token");d&&(u.Authorization=`Bearer ${d}`),console.log("Fetching status statistics from:",c.toString());const p=yield fetch(c.toString(),{headers:u});if(p.ok){const t=yield p.json();console.log("API Data received:",t);const e={checkedCount:"number"==typeof t.tekshirilgan?t.tekshirilgan:Number(t.tekshirilgan)||0,approvedCount:"number"==typeof t.tasdiqlangan?t.tasdiqlangan:Number(t.tasdiqlangan)||0,rejectedCount:"number"==typeof t.tasdiqlanmagan?t.tasdiqlanmagan:Number(t.tasdiqlanmagan)||0,inProgressCount:"number"==typeof t.jarayonda?t.jarayonda:Number(t.jarayonda)||0};console.log("Setting data with values:",e),l(e)}else{const r=yield p.text();console.error("API Error:",p.status,r),l({checkedCount:null!==(t=i.checkedCount)&&void 0!==t?t:2e3,approvedCount:null!==(e=i.approvedCount)&&void 0!==e?e:1e3,rejectedCount:null!==(s=i.rejectedCount)&&void 0!==s?s:600,inProgressCount:null!==(a=i.inProgressCount)&&void 0!==a?a:400})}}catch(t){console.error("Fetch error:",t),l({checkedCount:null!==(r=i.checkedCount)&&void 0!==r?r:2e3,approvedCount:null!==(n=i.approvedCount)&&void 0!==n?n:1e3,rejectedCount:null!==(o=i.rejectedCount)&&void 0!==o?o:600,inProgressCount:null!==(c=i.inProgressCount)&&void 0!==c?c:400})}finally{d(!1)}},new((s=void 0)||(s=Promise))((function(r,n){function o(t){try{c(a.next(t))}catch(t){n(t)}}function i(t){try{c(a.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,i)}c((a=a.apply(t,e||[])).next())}));var t,e,s,a};let e=localStorage.getItem("selectedYear"),s=localStorage.getItem("selectedSoato"),a=localStorage.getItem("selectedDistrict");t();const r=r=>{if("selectedYear"===r.key||"selectedSoato"===r.key||"selectedDistrict"===r.key){const r=localStorage.getItem("selectedYear"),n=localStorage.getItem("selectedSoato"),o=localStorage.getItem("selectedDistrict");r===e&&n===s&&o===a||(e=r,s=n,a=o,t())}},n=e=>{const a=e.detail||localStorage.getItem("selectedSoato");a!==s&&(s=a,t())},o=e=>{const s=e.detail||localStorage.getItem("selectedDistrict");s!==a&&(a=s,t())},c=setInterval((()=>{const r=localStorage.getItem("selectedYear"),n=localStorage.getItem("selectedSoato"),o=localStorage.getItem("selectedDistrict");r===e&&n===s&&o===a||(e=r,s=n,a=o,t())}),100);return window.addEventListener("storage",r),window.addEventListener("custom-map-region-change",n),window.addEventListener("custom-map-district-change",o),()=>{window.removeEventListener("storage",r),window.removeEventListener("custom-map-region-change",n),window.removeEventListener("custom-map-district-change",o),clearInterval(c)}}),[]);const k=j[f]||j.uz,C=t=>t.toLocaleString(k.numberLocale,{minimumFractionDigits:0,maximumFractionDigits:0}).replace(/,/g," "),S=t=>{const e=[c.checkedCount,c.approvedCount,c.rejectedCount,c.inProgressCount],s=Math.max(...e);return!s||t<=0?"4%":t/s*100+"%"},w=t=>{y(t);try{const e=x[t];localStorage.setItem("status",e)}catch(t){}};return(0,t.jsx)("div",{className:"status-statistics-widget "+(p?"visible":"")},(0,t.jsx)("div",{className:"status-statistics-header"},(0,t.jsx)("span",{className:"status-statistics-title"},k.title)),(0,t.jsx)("div",{className:"status-statistics-columns"},(0,t.jsx)("div",{className:"status-statistics-column status-checked"+("checked"===h?" status-selected":""),onClick:()=>w("checked")},(0,t.jsx)("div",{className:"status-statistics-top"},(0,t.jsx)("div",{className:"status-statistics-value"},u?"...":C(c.checkedCount)),(0,t.jsx)("div",{className:"status-statistics-label"},k.checkedLabel)),(0,t.jsx)("div",{className:"status-statistics-bar status-checked-bar",style:{height:S(c.checkedCount)}})),(0,t.jsx)("div",{className:"status-statistics-column status-approved"+("approved"===h?" status-selected":""),onClick:()=>w("approved")},(0,t.jsx)("div",{className:"status-statistics-top"},(0,t.jsx)("div",{className:"status-statistics-value"},u?"...":C(c.approvedCount)),(0,t.jsx)("div",{className:"status-statistics-label"},k.approvedLabel)),(0,t.jsx)("div",{className:"status-statistics-bar status-approved-bar",style:{height:S(c.approvedCount)}})),(0,t.jsx)("div",{className:"status-statistics-column status-rejected"+("rejected"===h?" status-selected":""),onClick:()=>w("rejected")},(0,t.jsx)("div",{className:"status-statistics-top"},(0,t.jsx)("div",{className:"status-statistics-value"},u?"...":C(c.rejectedCount)),(0,t.jsx)("div",{className:"status-statistics-label"},k.rejectedLabel)),(0,t.jsx)("div",{className:"status-statistics-bar status-rejected-bar",style:{height:S(c.rejectedCount)}})),(0,t.jsx)("div",{className:"status-statistics-column status-in-progress"+("inProgress"===h?" status-selected":""),onClick:()=>w("inProgress")},(0,t.jsx)("div",{className:"status-statistics-top"},(0,t.jsx)("div",{className:"status-statistics-value"},u?"...":C(c.inProgressCount)),(0,t.jsx)("div",{className:"status-statistics-label"},k.inProgressLabel)),(0,t.jsx)("div",{className:"status-statistics-bar status-in-progress-bar",style:{height:S(c.inProgressCount)}}))))};function j(t){a.p=t}})(),r})())}}}));